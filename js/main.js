const data = {
    //! Quienes Somos
    us: [
        {
            description: "Una academia de danza que fusiona t√©cnicas de danza contempor√°nea, moderna y folcl√≥rica, formando bailarines con mentalidad profesional desde los 3 a√±os. Ofrecemos programas para ni√±os, j√≥venes, adultos y adultos mayores. Tambi√©n contamos con servicios de shows, alquiler de vestuario y confecci√≥n de trajes t√≠picos. ¬°Bailar es nuestra pasi√≥n!",
            images: [
            "img/group.webp",
            "img/group2.webp",
        ]
        }
    ],
    // ! Grupos Academicos
    groups: [
        {
            name: "Pre-Infantil",
            description: "Danza estilos cl√°sico, urbano, latino y folclore",
            description_large:
                "",
            type: "grupo",
            ages: "2-3 a√±os",
            schedule: "Sab 10:00 AM -1:00 PM",
            image: "img/pre-infantil.webp",
        },
        {
            name: "Infantil",
            description: "Danza estilos cl√°sico, urbano, latino y folclore",
            description_large:
                "",
            type: "grupo",
            ages: "2-3 a√±os",
            schedule: "Sab 10:00 AM - 1:00 PM",
            image: "img/infantil.webp",
        },
        {
            name: "Junior",
            description: "Danza estilos cl√°sico, urbano, latino y folclore",
            description_large:
                "En este grupo manejamos Infantil A y B, dirigido a ni√±os de 3 a 6 a√±os, donde se inicia y fortalece el proceso formativo en danza de manera l√∫dica y progresiva. A trav√©s de los estilos cl√°sico, urbano, latino y folcl√≥rico, los ni√±os desarrollan coordinaci√≥n, ritmo, expresi√≥n corporal y disciplina, fomentando el amor por la danza desde temprana edad. Infantil A tiene horario los mi√©rcoles y viernes de 4:00 a 6:00 p.m., mientras que Infantil B se desarrolla los s√°bados de 9:30 a.m. a 1:00 p.m.",
            type: "grupo",
            ages: "6-10 a√±os",
            schedule: "Infantil A, B y C",
            image: "img/junior.webp",
        },
        {
            name: "Pre-Juvenil",
            description: "Danza estilos cl√°sico, urbano, latino y folclore",
            description_large:
                "",
            type: "grupo",
            ages: "10-11 a√±os",
            schedule: "Sab 10:00 AM - 1:00 PM",
            image: "img/pre-juvenil.webp",
        },
        {
            name: "Juvenil",
            description: "Danza estilos cl√°sico, urbano, latino y folclore",
            description_large:
                "En este grupo manejamos Infantil A y B, dirigido a ni√±os de 3 a 6 a√±os, tanto para quienes desean iniciar en la danza como para aquellos que contin√∫an su proceso formativo. El aprendizaje se desarrolla de manera l√∫dica y progresiva a trav√©s de los estilos cl√°sico, urbano, latino y folcl√≥rico, fortaleciendo la coordinaci√≥n, el ritmo, la expresi√≥n corporal y la disciplina, y fomentando el amor por la danza desde temprana edad. Infantil A tiene horario los mi√©rcoles y viernes de 4:00 p.m. a 6:00 p.m., mientras que Infantil B se desarrolla los s√°bados de 9:30 a.m. a 1:00 p.m.",
            type: "grupo",
            ages: "12-17 a√±os",
            schedule: "Sab 10:00 AM - 1:00 PM",
            image: "img/juvenil.webp",
        },
        {
            name: "Compa√±ia Yurumany",
            description: "Danza estilos cl√°sico, urbano, latino y folclore",
            description_large:
                "",
            type: "compa√±ia",
            ages: "18-27 a√±os",
            schedule: "Sab 10:00 AM - 1:00 PM",
            image: "img/yurumany.webp",
        },
        {
            name: "Compa√±ia Kawsay",
            description: "Danza estilos cl√°sico, urbano, latino y folclore",
            description_large:
                "",
            type: "compa√±ia",
            ages: "Mayores de 70 a√±os",
            schedule: "Sab 10:00 AM - 1:00 PM",
            image: "img/kawsay.webp",
        },
        {
            name: "Baile Social",

        }
    ],
    // ! Profesores
    teachers: [
        {
            name: "Jorge Mauricio Pinilla",
            //specialty: "Especialidad? jsjsjjs",
            experience: "Director",
            image: "img/mauricio.webp",
            achievements: ["Director", "Coreografo"],
        },
        {
            name: "Anny Dayanna Nu√±ez",
            //specialty: "Especialidad? x2",
            experience: "Profesora",
            image: "img/anny.webp",
            achievements: ["Infanti", "Junior"],
        },
        {
            name: "Danna Sofia Bautista",
            //specialty: "Hace algo?",
            experience: "Auxiliar",
            image: "img/danna.webp",
            achievements: ["Infantil B", "Junior B"],
        },
        {
            name: "Angie Tatiana P√©rez",
            //specialty: "The peach? JASJAJSJ",
            experience: "Profesora",
            image: "img/gy.webp",
            achievements: ["Junior C","Juvenil C"],
        },
        {
            name: "Angie Serrano",
            //specialty: "??????????",
            experience: "Profesora",
            image: "img/angie.webp",
            achievements: ["Infanti", "Junior"],
        },
        {
            name: "Cesar L√©pez",
            //specialty: "Adiestrando perros",
            experience: "Profesor",
            image: "img/cesar.webp",
            achievements: ["Juvenil", "Junior C"],
        },
    ],
    // ! Equipo Admin
    adminTeam: [
        {
            name: "Daniel L√≥pez",
            position: "Medios Audiovisuales",
            description: "Miercoles de 2x1",
            image: "img/pipe.webp",
        },
        {
            name: "Juan Diego Quintana",
            position: "Sistemas y medios audiovisuales",
            description: "Vomite ü§Æü§Æ",
            image: "img/juan-Diego.webp",
        },
        {
            name: "Sergio",
            position: "Asistente administrativo",
            description: "Todas quieren con el",
            image: "img/sergio.webp",
        },
        {
            name: "Julieth",
            position: "administradora contable",
            description: "La perris",
            image: "img/julieth.webp",
        },
        {
            name: "Lily Vega",
            position: "administradora archivistica",
            description: "La futura esposa de Sergei",
            image: "img/lily.webp",
        },
    ],
    // ! Eventos
    events: [
        {
            title: "Se robaron la navidad",
            description: "Clausura Dampro",
            date: "14 Diciembre",
            localitation: "Bucaramanga",
            image:
                "img/se-robaron-la-navidad.webp",
        }
    ],
    // ! Logros
    achievements: [
        {
            icon: "üèÜ",
            number: "5+",
            title: "Premios ganados",
            description: "Premios",
        },
        {
            icon: "üë©‚Äçüéì",
            number: "90+",
            title: "Estudiantes Activos",
            description: "Formando nuevos talentos",
        },
        {
            icon: "üéü",
            number: "300+",
            title: "Presentaciones",
            description: "En teatros y eventos del pais",
        },
    ],
    //! Obras destacadas de la compa√±ia
    works: [
        {
            image: "img/marginados.webp",
            title: "Marginados",
            subtitle: "Juliano P√°jara",
            type: "companiesWorks"
        },
        {
            image: "img/mariaT.webp",
            title: "Maria Teresa",
            subtitle: "La historia de una monta√±era",
            type: "companiesWorks"
        },
        {
            image: "img/fiesta_campesina.webp",
            title: "Fiesta Campesina",
            subtitle: "¬°Que viva Santander mano",
            type: "companiesWorks"
        },
        {
            image: "img/casorio.webp",
            title: "El casorio",
            subtitle: "La historia de un amor campesino",
            type: "companiesWorks"
        },
        {
            image: "img/enredados.webp",
            title: "Enredados",
            subtitle: "Adaptaci√≥n de la pel√≠cula animada de disney",
            type: "groupsWorks"
        },
        {
            image: "img/origen-de-los-guardianes.webp",
            title: "El origen de los guardianes",
            subtitle: "Adaptaci√≥n de la pel√≠cula animada de DreamWorks",
            type: "groupsWorks"
        }
        ,
        {
            image: "img/emiliano.webp",
            title: "Emiliano y su bambazu",
            subtitle: "la historia de Emiliano",
            type: "groupsWorks"
        }
    ],
    //!Experiencias
    experiences: [
        //{
        //    image: "img/obra.jpg",
        //    title: "Argentina",
        //    localitation: "Buenos aires",
        //    age: "2020"
        //},
        //{
        //    image: "img/obra.jpg",
        //    title: "Ecuador",
        //    localitation: "Quito",
        //    age: "2020"
        //},
        {
            image: "img/peru.webp",
            title: "Per√∫",
            localitation: "Lima",
            age: "2022"
        },
        {
            image: "img/mexico.webp",
            title: "M√©xico",
            localitation: "Morelia",
            age: "2023"
        },
        {
            image: "img/chile.webp",
            title: "Gira Chile",
            localitation: "Santiago de Chile",
            age: "2025"
        },
        {
            image: "img/danzando-peru.webp",
            title: "Danzando por el Per√∫",
            localitation: "Lima Per√∫",
            age: "2025"
        }
    ]

}
// * navBar
const hamburger = document.getElementById("hamburger")
const navLinks = document.getElementById("nav-links")

// * varibales carrusel
let currentSlide = 0
let carouselInterval

//* Elementos carrusel
const newsCarousel = document.getElementById("news-carousel")
const prevBtn = document.getElementById("prev-btn")
const nextBtn = document.getElementById("next-btn")
const carouselIndicators = document.getElementById("carousel-indicators")

// * Funcionalidad de la hamburguesa
hamburger.addEventListener("click", (e) => {
    e.stopPropagation();
    navLinks.classList.toggle("active");
});

// * Se cierra cuando el evento esta fuera del modal
document.addEventListener("click", (e) => {
    if (navLinks.classList.contains("active") && !navLinks.contains(e.target) && !hamburger.contains(e.target)) {
        navLinks.classList.remove("active");
    }
});

// * Se cierra al seleccionar una opcion
document.querySelectorAll(".nav-links a").forEach((link) => {
    link.addEventListener("click", () => {
        navLinks.classList.remove("active");
    });
});

//* Inicializacion de la app

document.addEventListener("DOMContentLoaded", () => {
    populateUs()
    populateGroups()
    populateTeachers()
    populateAdmin()
    populateEvents()
    populateWorks()
    populateExperiences()
})

//* Populate Sections

function populateUs() {
        const usContainer = document.getElementById("us-container");
    const usData = data.us[0];

    // Crear estructura del carrusel
    usContainer.innerHTML = `
        <div class="us-carousel">
            <div class="us-slides"></div>
        </div>
        <p class="us-description">${usData.description}</p>
    `;

    const slideContainer = usContainer.querySelector(".us-slides");

    // Insertar im√°genes
    usData.images.forEach(img => {
        const slide = document.createElement("div");
        slide.classList.add("us-slide");

        slide.innerHTML = `<img src="${img}" alt="Imagen nosotros" loading="lazy">`;

        slideContainer.appendChild(slide);
    });

    // --- Carrusel autom√°tico ---
    let index = 0;
    const slides = slideContainer.querySelectorAll(".us-slide");

    function changeSlide() {
        slides.forEach(s => s.style.opacity = "0");
        slides[index].style.opacity = "1";

        index = (index + 1) % slides.length;
    }

    changeSlide();  
    setInterval(changeSlide, 3000); // Cambia cada 3 seg
}

function populateGroups() {
    const groupsContainer = document.getElementById("groups-container")
    const companiesContainer = document.getElementById("companies-container")

    groupsContainer.innerHTML = data.groups
        .filter((item) => item.type === "grupo")
        .map(
            (group, index) =>
                `
        <div class="group-card" data-index="${index}" style="animation-delay: ${index * 0.1}s">
            <div class="group-image">
                <img src="${group.image}" loading="lazy">
                </div>
                <h3>${group.name}</h3>
                <p>${group.description}</p>
                <div class="group-details">
                    <p class="ages">Edades: ${group.ages}</p>
                    <p class="schedule">Haz clic y conoce m√°s sobre el grupo</p>
                </div>
            </div>
        </div>
        `,
        )
        .join("")

    companiesContainer.innerHTML = data.groups
        .filter((item) => item.type === "compa√±ia")
        .map(
            (group, index) =>
                `
         <div class="group-card" style="animation-delay: ${index * 0.1}s">
            <div class="group-image">
                <img src="${group.image}" loading="lazy">
                </div>
                <h3>${group.name}</h3>
                <p>${group.description}</p>
                <div class="group-details">
                    <p class="ages">Edades: ${group.ages}</p>
                    <p class="schedule">Haz clic y conoce m√°s sobre el grupo</p>
                </div>
            </div>
        </div>
        `,
        )
        .join("")
    //EVENTO
    // Para grupos
    document.querySelectorAll(".group-card").forEach((card, index) => {
        card.setAttribute("data-type", "grupo")
        card.setAttribute("data-index", index)

        card.addEventListener("click", () => {
            openModal(index, "grupo")
        })
    })

    // Para compa√±√≠as
    document.querySelectorAll(".company-card").forEach((card, index) => {
        card.setAttribute("data-type", "compa√±ia")
        card.setAttribute("data-index", index)

        card.addEventListener("click", () => {
            openModal(index, "compa√±ia")
        })
    })
}

function openModal(index, type) {
    const modal = document.getElementById("modal")

    let group
    if (type === "grupo") {
        group = data.groups[index]
    } else if (type === "compa√±ia") {
        group = data.companies[index]
    }

    if (!group) {
        console.error("No se encontr√≥ el objeto con index:", index, "y type:", type)
        return
    }

    // Generar contenido
    modal.innerHTML = `
    <div class="modal-content">
        <span class="close-btn" id="closeModal">&times;</span>
        <img src="${group.image}" alt="${group.name}" class="modal-image" loading="lazy">
        <div class="info">
            <h2>${group.name}</h2>
            <p>${group.description_large}</p>
            <p><strong>Edades:</strong> ${group.ages}</p>
            
        </div>
        <a href="https://wa.me/573187059300?text=%C2%A1Hola!%20Me%20interesa%20unirme%20a%20${encodeURIComponent(group.name)}.%20%C2%BFMe%20das%20m%C3%A1s%20informaci%C3%B3n%3F" 
        target="_blank">
            <button class="btn-primary">Unirme ahora</button>
        </a>
    </div>
  `

    // Mostrar animaci√≥n de entrada
    modal.classList.remove("hidden")
    const modalContent = modal.querySelector(".modal-content")
    requestAnimationFrame(() => {
        modalContent.classList.add("show")
    })

    // Cerrar modal
    document.getElementById("closeModal").addEventListener("click", () => {
        closeModal(modal, modalContent)
    })

    window.addEventListener("click", (e) => {
        if (e.target.id === "modal") {
            closeModal(modal, modalContent)
        }
    })
}

function closeModal(modal, modalContent) {
    modalContent.classList.remove("show")
    modalContent.classList.add("hide")

    // Esperar a que termine la animaci√≥n
    modalContent.addEventListener(
        "transitionend",
        () => {
            modal.classList.add("hidden")
            modalContent.classList.remove("hide")
        },
        { once: true },
    )
}

function populateWorks() {
    const companiesContainer = document.getElementById("companies-works")
    const groupsContainer = document.getElementById("groups-works")

    companiesContainer.innerHTML = data.works
        .filter((item) => item.type === "companiesWorks")
        .map(
            (work, index) => `
        <div class="event-card" style="animation-delay: ${index * 0.1}s">
            <div class="event-image-container">
                <img src="${work.image}" alt="${event.title}" class="work-img" loading="lazy">
            </div>
            <div class="event-content">
                <div class="event-info">
                    <h3 class="event-title">${work.title}</h3>
                    <p class="event-description">${work.subtitle}</p>
                </div>
            </div>
        </div>
      `
        )
        .join("");

    groupsContainer.innerHTML = data.works
        .filter((item) => item.type === "groupsWorks")
        .map(
            (work, index) => `
        <div class="event-card" style="animation-delay: ${index * 0.1}s">
            <div class="event-image-container">
                <img src="${work.image}" alt="${event.title}" loading="lazy">
            </div>
            <div class="event-content">
                <div class="event-info">
                    <h3 class="event-title">${work.title}</h3>
                    <p class="event-description">${work.subtitle}</p>
                </div>
            </div>
        </div>
      `
        )
        .join("");
}

function populateTeachers() {
    const container = document.getElementById("teachers-container")
    container.innerHTML = data.teachers
        .map(
            (teacher, index) =>
                `
        <div class="teacher-card" style="animation-delay: ${index * 0.15}s">
            <div class="teacher-image-container">
                <img src="${teacher.image}" alt="${teacher.name}" class="teacher-image" loading="lazy">
            </div>
            <div class="teacher-info">
                <h3>${teacher.name}</h3>
                <!-- <p class="specialty">${teacher.specialty}</p> -->
                <p class="experience"><span>${teacher.experience}</span></p>
                <br>
                <div class="achievements">
                    ${teacher.achievements
                    .map(
                        (achievement) => `
                            <span class="achievement-tag">${achievement}</span>
                            `,
                    )
                    .join("")}
                </div>
            </div>
        </div>
        `,
        )
        .join("")
}

function populateAdmin() {
    const container = document.getElementById("admin-container")
    container.innerHTML = data.adminTeam
        .map(
            (member, index) => `
        <div class="admin-card" style="animation-delay: ${index * 0.15}s">
            <div class="admin-image-container">
                <img src="${member.image}" alt="${member.name}" class="admin-image" loading="lazy">
            </div>
            <div class="admin-info">
                <h3>${member.name}</h3>
                <p class="position"><span>${member.position}</span></p>
                <!--<p class="description">${member.description}</p>-->
            </div>
            
        </div>
        `,
        )
        .join("")
}

function populateEvents() {
    const container = document.getElementById("events-container");
    console.log("Contenedor encontrado:", container);

    if (!container) {
        console.error("No se encontr√≥ el contenedor de eventos");
        return;
    }

    console.log("N√∫mero de eventos:", data.events.length);
    console.log("Datos de eventos:", data.events);

    const eventsHTML = data.events
        .map(
            (event, index) => `
        <div class="event-card" style="animation-delay: ${index * 0.1}s">
            <div class="event-image-container">
                <img src="${event.image}" alt="${event.title}" loading="lazy">
            </div>
            <div class="event-content">
                <div class="event-info">
                    <h3 class="event-title">${event.title}</h3>
                    <p class="event-description">${event.description}</p>
                </div>
                <div class="event-details">
                    <div class="event-date">${event.date}</div>
                    <div class="event-location">
                        <span class="event-tag">üìç</span>
                        <span>${event.location || event.localitation}</span>
                    </div>
                </div>
            </div>
        </div>
      `
        )
        .join("");

    console.log("HTML generado:", eventsHTML);
    container.innerHTML = eventsHTML;
    console.log("Contenido insertado en el contenedor");
}



function populateExperiences() {
    const container = document.getElementById("experiencias-container")
    container.innerHTML = data.experiences
        .map(
            (experience, index) =>
                `
         <div class="group-card" style="animation-delay: ${index * 0.1}s">
            <div class="group-image">
                <img src="${experience.image}" loading="lazy">
                </div>
                <h3>${experience.title}</h3>
                <div class="group-details">
                    <p class="ages">${experience.localitation}</p>
                    <p class="schedule">${experience.age}</p>
                </div>
            </div>
        </div>
        `,
        )
        .join("")
}
